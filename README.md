Александр antik, [01.12.2025 0:25]
Отлично! Добавим новые разделы про систему модерации и владельцев продуктов. Вот обновленный README.md:
# Skystore - Интернет-магазин на Django

Веб-приложение интернет-магазина с каталогом товаров и блогом, построенное на Django с Bootstrap.

## 🚀 Функциональность

- Главная страница - информационный лендинг
- Страница контактов - контактная информация
- Адаптивный дизайн - работа на всех устройствах
- Навигация - меню между страницами
- 🆕 Каталог товаров - модели Product и Category
- 🆕 Админ-панель - управление товарами и категориями
- 🆕 PostgreSQL - профессиональная база данных
- 🆕 Загрузка изображений - для товаров через Pillow
- 🆕 Миграции БД - система управления схемой базы данных
- 🆕 Детальные страницы товаров
- 🆕 Динамическое отображение каталога
- 🆕 Блог с CRUD операциями - полное управление записями
- 🆕 Счетчик просмотров - автоматический учет просмотров статей
- 🆕 Фильтрация записей - показ только опубликованных статей
- 🆕 Умные перенаправления - после редактирования переход на просмотр статьи
- 🆕 Полный CRUD для товаров - создание, чтение, обновление, удаление
- 🆕 Защита от спама - валидация запрещенных слов в названиях и описаниях
- 🆕 Валидация изображений - проверка формата и размера загружаемых файлов
- 🆕 Валидация цен - защита от отрицательных и нулевых цен
- 🆕 **Система модерации** - управление публикацией продуктов
- 🆕 **Владельцы продуктов** - ограничение прав редактирования и удаления

## 🛠 Технологии

- Backend: Django 5.2+
- Frontend: Bootstrap 5.3
- Язык: Python 3.11+
- 🆕 База данных: PostgreSQL (ранее SQLite)
- 🆕 Pillow - обработка изображений
- 🆕 psycopg2 - драйвер PostgreSQL
- 🆕 python-dotenv - управление переменными окружения
- 🆕 Class-Based Views (CBV) - для блога и каталога
- 🆕 Django Forms - с кастомной валидацией

## 📁 Структура проекта


Django/
├── catalog/                 # Основное приложение
│   ├── management/commands/
│   │   ├── fill_products.py # 🆕 Кастомная команда
│   │   ├── create_moderator_group.py # 🆕 Создание группы модераторов
│   │   └── set_product_owners.py # 🆕 Установка владельцев продуктов
│   ├── fixtures/           # 🆕 Фикстуры данных
│   │   ├── category.json
│   │   └── product.json
│   ├── migrations/         # 🆕 Файлы миграций
│   ├── templates/catalog/
│   │   ├── base.html       # 🆕 Базовый шаблон
│   │   ├── includes/
│   │   │   └── header.html # 🆕 Подшаблон меню
│   │   ├── home.html
│   │   ├── contacts.html
│   │   ├── product_detail.html
│   │   ├── product_list.html      # 🆕 Список товаров
│   │   ├── product_form.html      # 🆕 Форма товара
│   │   └── product_confirm_delete.html # 🆕 Подтверждение удаления
│   ├── admin.py           # 🆕 Настройки админки
│   ├── models.py          # 🆕 Модели данных
│   ├── forms.py           # 🆕 Формы с валидацией
│   ├── views.py           # 🆕 CBV контроллеры
│   └── urls.py
├── blog/                   # 🆕 Приложение блога
│   ├── migrations/
│   ├── templates/blog/
│   │   ├── blogpost_list.html
│   │   ├── blogpost_detail.html
│   │   ├── blogpost_form.html
│   │   └── blogpost_confirm_delete.html
│   ├── admin.py
│   ├── models.py          # 🆕 Модель BlogPost
│   ├── views.py           # 🆕 CBV с кастомной логикой
│   └── urls.py
├── config/                 # Настройки проекта
│   ├── settings.py        # 🆕 Настройки PostgreSQL
│   ├── urls.py            # 🆕 Маршруты для медиафайлов и блога
│   └── ...
├── media/                 # 🆕 Папка для загружаемых файлов
├── .env                   # 🆕 Переменные окружения
├── requirements.txt       # 🆕 Зависимости проекта
└── manage.py

## 🆕 Модели данных

### Category
- name - название категории
- description - описание категории

### Product  
- name - название товара
- description - описание товара
- image - изображение товара
- category - связь с категорией (ForeignKey)
- price - цена товара
- created_at - дата создания
- updated_at - дата обновления
- is_published - статус публикации
- **owner - владелец продукта (ForeignKey to User)**

### 🆕 BlogPost
- title - заголовок статьи
- content - содержимое статьи

Александр antik, [01.12.2025 0:25]
- preview - превью изображение
- created_at - дата создания
- is_published - признак публикации
- views_count - количество просмотров

## ⚡️ Быстрый старт

```bash
# Установка
git clone <repository-url>
cd Django
python -m venv .venv
.venv\Scripts\activate  # Windows
# source .venv/bin/activate  # Linux/Mac

# 🆕 Установка зависимостей
pip install -r requirements.txt

# 🆕 Настройка базы данных PostgreSQL
# Создайте БД и настройте .env файл

# Миграции и запуск
python manage.py migrate
python manage.py createsuperuser
python manage.py runserver

Откройте в браузере:

· http://127.0.0.1:8000/ - Главная страница
· http://127.0.0.1:8000/contacts/ - Контакты
· http://127.0.0.1:8000/admin/ - Админ-панель
· http://127.0.0.1:8000/product/1/ - Страница товара
· http://127.0.0.1:8000/products/ - Все товары
· http://127.0.0.1:8000/product/create/ - Создание товара
· http://127.0.0.1:8000/blog/ - Блог

🔐 Аутентификация и авторизация

Новые маршруты пользователей

· http://127.0.0.1:8000/users/login/ - Вход в систему
· http://127.0.0.1:8000/users/register/ - Регистрация
· http://127.0.0.1:8000/users/profile/ - Профиль пользователя
· http://127.0.0.1:8000/users/logout/ - Выход из системы

Особенности реализации

· ✅ Кастомная модель пользователя с поддержкой аватаров
· ✅ Аутентификация по email вместо username
· ✅ Автоматический вход после регистрации
· ✅ Приветственные email новым пользователям
· ✅ Защита профиля декоратором @login_required
· ✅ Динамическое меню - меняется в зависимости от статуса авторизации

🛠 Система модерации продуктов

Группа "Модератор продуктов"

· ✅ Создана автоматически через кастомную команду
· ✅ Права на отмену публикации - can_unpublish_product
· ✅ Права на изменение статуса - can_change_publish_status
· ✅ Права на удаление любых продуктов - delete_product

Функциональность модератора

· 🚫 Снятие с публикации - отмена публикации продуктов
· ✅ Публикация - восстановление публикации продуктов
· 🔄 Переключение статуса - быстрая смена статуса публикации
· 🗑 Удаление любых продуктов - независимо от владельца

👤 Система владельцев продуктов

Автоматическое назначение владельца

· ✅ При создании продукта автоматически устанавливается текущий пользователь
· ✅ Поле owner в модели Product (ForeignKey to User)
· ✅ Совместимость с существующими продуктами через команду set_product_owners

Ограничения прав

· ✏️ Редактирование - только владелец продукта
· 🗑 Удаление - владелец ИЛИ модератор
· 👀 Просмотр - все пользователи (включая неавторизованных)

Визуальные индикаторы

· 👤 Бейдж владельца - отображение создателя продукта
· ⭐ "Ваш продукт" - выделение продуктов текущего пользователя
· 🛠 Блоки управления - разные для владельцев и модераторов

🎯 Маршруты

Основные URL

URL Описание Доступ
/ Главная страница Все
/contacts/ Страница контактов Все
/admin/ Админ-панель Суперпользователь
/media/ Медиафайлы Все
/product/<int:pk>/ Страница товара Все
/products/ Список всех товаров Все
/product/create/ Создание товара Только авторизованные
/product/<int:pk>/update/ Редактирование товара Только владелец
/product/<int:pk>/delete/ Удаление товара Владелец ИЛИ модератор

Управление публикацией

URL Описание Доступ
/product/<int:pk>/unpublish/ Снять с публикации Модераторы
/product/<int:pk>/publish/ Опубликовать Модераторы
/product/<int:pk>/toggle-publish/ Переключить статус Модераторы

Блог

URL Описание Доступ
/blog/ Список записей блога Все
/blog/post/<int:pk>/ Детальная страница записи Все
/blog/post/create/ Создание записи Только авторизованные
/blog/post/<int:pk>/update/ Редактирование записи Только авторизованные
/blog/post/<int:pk>/delete/ Удаление записи Только авторизованные

Пользователи

URL Описание Доступ
/users/login/ Вход в систему Все
/users/register/ Регистрация Все
/users/profile/ Профиль пользователя Только авторизованные
/users/logout/ Выход из системы Только авторизованные

🛠 Команды управления
# Заполнение тестовыми данными
python manage.py fill_products

# Создание группы модераторов
python manage.py create_moderator_group

# Установка владельцев продуктов
python manage.py set_product_owners
Александр antik, [01.12.2025 0:25]
Отлично! Добавим новые разделы про систему модерации и владельцев продуктов. Вот обновленный README.md:
# Skystore - Интернет-магазин на Django

Веб-приложение интернет-магазина с каталогом товаров и блогом, построенное на Django с Bootstrap.

## 🚀 Функциональность

- Главная страница - информационный лендинг
- Страница контактов - контактная информация
- Адаптивный дизайн - работа на всех устройствах
- Навигация - меню между страницами
- 🆕 Каталог товаров - модели Product и Category
- 🆕 Админ-панель - управление товарами и категориями
- 🆕 PostgreSQL - профессиональная база данных
- 🆕 Загрузка изображений - для товаров через Pillow
- 🆕 Миграции БД - система управления схемой базы данных
- 🆕 Детальные страницы товаров
- 🆕 Динамическое отображение каталога
- 🆕 Блог с CRUD операциями - полное управление записями
- 🆕 Счетчик просмотров - автоматический учет просмотров статей
- 🆕 Фильтрация записей - показ только опубликованных статей
- 🆕 Умные перенаправления - после редактирования переход на просмотр статьи
- 🆕 Полный CRUD для товаров - создание, чтение, обновление, удаление
- 🆕 Защита от спама - валидация запрещенных слов в названиях и описаниях
- 🆕 Валидация изображений - проверка формата и размера загружаемых файлов
- 🆕 Валидация цен - защита от отрицательных и нулевых цен
- 🆕 **Система модерации** - управление публикацией продуктов
- 🆕 **Владельцы продуктов** - ограничение прав редактирования и удаления

## 🛠 Технологии

- Backend: Django 5.2+
- Frontend: Bootstrap 5.3
- Язык: Python 3.11+
- 🆕 База данных: PostgreSQL (ранее SQLite)
- 🆕 Pillow - обработка изображений
- 🆕 psycopg2 - драйвер PostgreSQL
- 🆕 python-dotenv - управление переменными окружения
- 🆕 Class-Based Views (CBV) - для блога и каталога
- 🆕 Django Forms - с кастомной валидацией

## 📁 Структура проекта


Django/
├── catalog/                 # Основное приложение
│   ├── management/commands/
│   │   ├── fill_products.py # 🆕 Кастомная команда
│   │   ├── create_moderator_group.py # 🆕 Создание группы модераторов
│   │   └── set_product_owners.py # 🆕 Установка владельцев продуктов
│   ├── fixtures/           # 🆕 Фикстуры данных
│   │   ├── category.json
│   │   └── product.json
│   ├── migrations/         # 🆕 Файлы миграций
│   ├── templates/catalog/
│   │   ├── base.html       # 🆕 Базовый шаблон
│   │   ├── includes/
│   │   │   └── header.html # 🆕 Подшаблон меню
│   │   ├── home.html
│   │   ├── contacts.html
│   │   ├── product_detail.html
│   │   ├── product_list.html      # 🆕 Список товаров
│   │   ├── product_form.html      # 🆕 Форма товара
│   │   └── product_confirm_delete.html # 🆕 Подтверждение удаления
│   ├── admin.py           # 🆕 Настройки админки
│   ├── models.py          # 🆕 Модели данных
│   ├── forms.py           # 🆕 Формы с валидацией
│   ├── views.py           # 🆕 CBV контроллеры
│   └── urls.py
├── blog/                   # 🆕 Приложение блога
│   ├── migrations/
│   ├── templates/blog/
│   │   ├── blogpost_list.html
│   │   ├── blogpost_detail.html
│   │   ├── blogpost_form.html
│   │   └── blogpost_confirm_delete.html
│   ├── admin.py
│   ├── models.py          # 🆕 Модель BlogPost
│   ├── views.py           # 🆕 CBV с кастомной логикой
│   └── urls.py
├── config/                 # Настройки проекта
│   ├── settings.py        # 🆕 Настройки PostgreSQL
│   ├── urls.py            # 🆕 Маршруты для медиафайлов и блога
│   └── ...
├── media/                 # 🆕 Папка для загружаемых файлов
├── .env                   # 🆕 Переменные окружения
├── requirements.txt       # 🆕 Зависимости проекта
└── manage.py

## 🆕 Модели данных

### Category
- name - название категории
- description - описание категории

### Product  
- name - название товара
- description - описание товара
- image - изображение товара
- category - связь с категорией (ForeignKey)
- price - цена товара
- created_at - дата создания
- updated_at - дата обновления
- is_published - статус публикации
- **owner - владелец продукта (ForeignKey to User)**

### 🆕 BlogPost
- title - заголовок статьи
- content - содержимое статьи

Александр antik, [01.12.2025 0:25]
# Создание фикстур
python manage.py dumpdata catalog.Category --indent 2

# Загрузка фикстур
python manage.py loaddata category.json product.json

# Работа с shell
python manage.py shell

# Создание приложения блога
python manage.py startapp blog

# Создание миграций
python manage.py makemigrations catalog blog users

# Применение миграций
python manage.py migrate

# Создание суперпользователя
python manage.py createsuperuser

📧 Настройка почтового сервера

Для Yandex
EMAIL_HOST = 'smtp.yandex.ru'
EMAIL_PORT = 587
EMAIL_USE_TLS = True
EMAIL_HOST_USER = 'your_email@yandex.ru'
EMAIL_HOST_PASSWORD = 'app_password'  # Пароль приложения

Переменные окружения (.env)
EMAIL_HOST_USER=your_email@yandex.ru
EMAIL_HOST_PASSWORD=your_app_password

🆕 Особенности реализации

Защита от спама и валидация:

· ✅ Запрещенные слова в названиях и описаниях товаров
· ✅ Валидация цен - защита от отрицательных и нулевых значений
· ✅ Кастомные сообщения об ошибках - понятные пользователю

Запрещенные слова:

казино, криптовалюта, крипта, биржа, дешево, бесплатно, обман, полиция, радар

Архитектура:

· ✅ Class-Based Views (CBV) - чистая и масштабируемая архитектура
· ✅ Django Forms - с кастомной валидацией и стилизацией
· ✅ Пространства имен URL - организованная маршрутизация
· ✅ Базовые шаблоны - переиспользуемые компоненты
· ✅ Кастомные бэкенды аутентификации
· ✅ Миксины для управления доступом - LoginRequiredMixin, UserPassesTestMixin
· ✅ Система разрешений Django - кастомные права и группы

🛡 Безопасность

· ✅ Чувствительные данные в .env файле
· ✅ PostgreSQL вместо SQLite для продакшена
· ✅ Переменные окружения для настроек БД
· ✅ Валидация пользовательского ввода
· ✅ Защита от XSS и SQL-инъекций
· ✅ Безопасная загрузка файлов
· ✅ CSRF защита всех форм
· ✅ Хеширование паролей
· ✅ Ограничение доступа к защищенным страницам
· ✅ Проверка прав доступа - владельцы и модераторы
· ✅ Защита от несанкционированного редактирования - только владельцы

👨‍💻 Разработка

Абрамов Александр

· GitHub: @1Abramov1

🙏 Благодарности

· Команда Bootstrap за отличный фреймворк
· Сообщество Python за документацию и примеры
· Команда PostgreSQL за надежную СУБД
· Сообщество Django за мощный фреймворк
· Все контрибьюторы проекта

---

⭐️ Не забудьте поставить звезду, если проект был полезен!

